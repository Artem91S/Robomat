## Основні можливості
### Інгест подій

Endpoint:

```POST /api/v1/event/``` - приймає масив подій у форматі JSON.

```GET /api/v1/stats/dau?from=YYYY-MM-DD&to=YYYY-MM-DD```- повертає кількість унікальних користувачів (user_id) за кожен день у заданому періоді.

```GET /api/v1/stats/top-events?from=YYYY-MM-DD&to=YYYY-MM-DD&limit=10``` - повертає топ подій (event_type) за кількістю.

```GET /api/v1/stats/retention?start_date=YYYY-MM-DD&windows=3```-обчислює когортний ретеншн (утримання користувачів) за денними інтервалами.
###  Ідемпотентність:
Повторне надсилання події з тим самим event_id не створює дубліката.

### Збереження даних

Для збереження використовується SQLite — легка реляційна база, зручна для локального розгортання та тестування.
Рішення вибрано через простоту, швидкість доступу до даних і сумісність із SQLAlchemy ORM.
Обґрунтування вибору наведено в ADR.md.

### Спостережуваність

* Структуровані логи реалізовано через Loguru.

* Повідомлення про помилки логуються з контекстом події.

### Безпека та стабільність

* Перевірка вхідних даних через Pydantic;

* Базовий rate limit для запобігання перевантаженням;

* Акуратна обробка помилок з коректними HTTP-кодами.

## Як запустити локально

1.Встановити всі залежності:

```bash
  pip install -r requirements.txt
```
2.Запустити pytest для тустування:
 ```bash
  python -m pytest -v
```
3.Створити базу даних:
 ```bash
  python -m app.scripts.init_db 
```
4.Завантажити данні з csv файлц:
 ```bash
  python -m app.scripts.cli_script data/events_sample.csv;
```
5.Запустити додаток uvicorn:
 ```bash
  uvicorn app.main:app --host 0.0.0.0 --port 8000 --reload
```
## Запуск додатку у контейнері через docker

Запустити одну команду у терміналі:

 ```bash
  docker compose up
```






